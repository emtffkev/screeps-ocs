let e={};module.exports=e,e.name="worker",e.run=function(e){e.data.targetId;null!=e.action&&"idle"!=e.action.name||this.nextAction(e),e.action&&e.target?e.action.step(e):logError("Creep without action/activity!\nCreep: "+e.name+"\ndata: "+JSON.stringify(e.data))},e.nextAction=function(e){if("worker"==e.data.creepType&&e.pos.roomName!=e.data.homeRoom&&Game.rooms[e.data.homeRoom]&&Game.rooms[e.data.homeRoom].controller)return DEBUG&&TRACE&&trace("Behaviour",{actionName:"travelling",behaviourName:this.name,creepName:e.name,assigned:!0,Behaviour:"nextAction",Action:"assign"}),Creep.action.travelling.assignRoom(e,e.data.homeRoom),!0;let i;e.sum<.5*e.carryCapacity?i=[Creep.action.picking,Creep.action.dismantling,Creep.action.withdrawing,Creep.action.uncharging,Creep.action.harvesting,Creep.action.reallocating,Creep.action.idle]:(i=e.room.situation.invasion&&e.room.controller&&e.room.controller.level>2?[Creep.action.fueling,Creep.action.feeding,Creep.action.repairing,Creep.action.idle]:"pioneer"===e.data.creepType?e.room.controller&&e.room.controller.level<2?[Creep.action.feeding,Creep.action.upgrading,Creep.action.building,Creep.action.repairing,Creep.action.fueling,Creep.action.fortifying,Creep.action.charging,Creep.action.storing,Creep.action.picking,Creep.action.idle]:[Creep.action.feeding,Creep.action.building,Creep.action.repairing,Creep.action.fueling,Creep.action.fortifying,Creep.action.charging,Creep.action.upgrading,Creep.action.storing,Creep.action.picking,Creep.action.idle]:[Creep.action.repairing,Creep.action.feeding,Creep.action.building,Creep.action.fueling,Creep.action.fortifying,Creep.action.charging,Creep.action.upgrading,Creep.action.storing,Creep.action.picking,Creep.action.idle],e.room.relativeEnergyAvailable<1&&(!e.room.population||!e.room.population.typeCount.hauler||e.room.population.typeCount.hauler<1||!e.room.population.typeCount.miner||e.room.population.typeCount.miner<1)&&i.unshift(Creep.action.feeding),e.room.controller&&e.room.controller.ticksToDowngrade<2e3&&i.unshift(Creep.action.upgrading)),e.sum>e.carry.energy&&i.unshift(Creep.action.storing),i.unshift(Creep.action.bulldozing);for(var n=0;n<i.length;n++){var o=i[n];const a=o.isValidAction(e);if(DEBUG&&TRACE&&trace("Action",{actionName:o.name,behaviourName:this.name,creepName:e.name,valid:a,Action:"isValidAction"}),a){const i=o.isAddableAction(e);if(DEBUG&&TRACE&&trace("Action",{actionName:o.name,behaviourName:this.name,creepName:e.name,addable:i,Action:"isAddableAction"}),i){const i=o.assign(e);if(i)return DEBUG&&TRACE&&trace(i?"Behaviour":"Action",{actionName:o.name,behaviourName:this.name,reepName:e.name,assigned:i,Behaviour:"nextAction",Action:"assign"}),!0}}}return!1};