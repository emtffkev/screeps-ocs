let r=new Creep.Action("claiming");module.exports=r,r.isValidAction=function(r){return!0},r.isValidTarget=function(r){return!r.room||!r.owner},r.isAddableAction=function(){return!0},r.isAddableTarget=function(){return!0},r.newTarget=function(r){let a;if(r.data.destiny&&(a=Game.flags[r.data.destiny.targetName||r.data.destiny.flagName]),a||(a=FlagDir.find(FLAG_COLOR.claim,r.pos,!1,FlagDir.claimMod,r.name)),!a)return null;if(Population.registerCreepFlag(r,a),!r.flag.room||r.flag.pos.roomName!=r.pos.roomName)return r.flag;if(r.flag.room.controller.my){r.flag.setColor(FLAG_COLOR.claim.spawn.color,FLAG_COLOR.claim.spawn.secondaryColor);let a=r=>Game.flags[r.name].remove();return _.forEach(FlagDir.filter(FLAG_COLOR.invade.exploit,r.flag.pos,!0),a),null}return r.flag.room.controller},r.step=function(r){if(global.CHATTY&&r.say(this.name,global.SAY_PUBLIC),r.target.color)return r.flag.pos.roomName==r.pos.roomName&&(r.data.targetId=null),void r.travelTo(r.target.pos);let a=r.pos.getRangeTo(r.target);if(a<=this.targetRange){var o=this.work(r);o!=OK&&r.handleError({errorCode:o,action:this,target:r.target,range:a,creep:r})}r.travelTo(r.target.pos)},r.work=function(r){return r.controllerSign(),r.claimController(r.target)};