let r=new Creep.Action("dismantling");module.exports=r,r.maxPerAction=3,r.maxPerTarget=3,r.renewTarget=!1,r.isValidAction=function(r){return 0===r.carryCapacity||r.sum<r.carryCapacity},r.isValidTarget=function(r){return null!=r},r.newTarget=function(r){let e,o=FlagDir.find(FLAG_COLOR.destroy.dismantle,r.pos,!0);if(o)if(void 0!==o.room){var n=o.room.lookForAt(LOOK_STRUCTURES,o.pos.x,o.pos.y);if(n&&n.length>0)return n[0];{let i=o.name;FlagDir.removeFromDir(o.name),o.remove();let t=(r,e,o)=>{return e.name==o?1/0:r};if(o=FlagDir.find(FLAG_COLOR.destroy.dismantle,r.pos,!0,t,i),i==o.name&&logError("Removed flag found again in dismantling.newTarget!"),o)if(void 0!==o.room){var n=o.room.lookForAt(LOOK_STRUCTURES,o.pos.x,o.pos.y);if(n&&n.length>0)return n[0];Room.costMatrixInvalid.trigger(o.room),FlagDir.removeFromDir(o.name),o.remove()}else e=o}}else e=o;return e},r.work=function(r){return r.dismantle(r.target)};