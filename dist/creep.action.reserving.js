let e=new Creep.Action("reserving");module.exports=e,e.isValidAction=function(e){return!0},e.isValidTarget=function(e){return e&&(!e.reservation||e.reservation.ticksToEnd<4999)},e.isAddableAction=function(){return!0},e.isAddableTarget=function(e,r){return e&&(e instanceof Flag||"controller"===e.structureType&&!e.owner)},e.newTarget=function(e){let r,t=e=>Flag.compare(e,FLAG_COLOR.claim.reserve)||Flag.compare(e,FLAG_COLOR.invade.exploit);return e.data.destiny&&(r=Game.flags[e.data.destiny.targetName||e.data.destiny.flagName]),r||(r=FlagDir.find(t,e.pos,!1,FlagDir.reserveMod,e.name)),r?(Population.registerCreepFlag(e,r),e.flag.room&&e.flag.pos.roomName==e.pos.roomName?e.flag.room.controller:e.flag):null},e.step=function(e){if(CHATTY&&e.say(this.name,SAY_PUBLIC),e.target.color)return e.flag.pos.roomName==e.pos.roomName&&(e.data.targetId=null),e.travelTo(e.target.pos);let r=e.pos.getRangeTo(e.target);if(r<=this.targetRange){var t=this.work(e);return t!=OK&&e.handleError({errorCode:t,action:this,target:e.target,range:r,creep:e}),t}return e.travelTo(e.target.pos)},e.work=function(e){var r;return e.controllerSign(),r=e.target.owner&&!e.target.my?e.attackController(e.target):e.reserveController(e.target)};