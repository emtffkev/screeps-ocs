let e=new Creep.Setup("upgrader");module.exports=e,e.minControllerLevel=2,e.maxMulti=function(e){let t=0;const o=e.storage&&e.storage.active?e.storage.charge:0;if((!e.storage||e.storage.active&&o>0)&&t++,(!e.storage||e.storage.active&&o>.5)&&t++,e.storage&&e.storage.active&&o>=1){let o=e.storage.store.energy-MAX_STORAGE_ENERGY[e.controller.level];t+=Math.ceil(o/2e4)}return Math.min(11,t)},e.maxCount=function(e){if(e.situation.invasion||e.conserveForDefense||e.structures.container.controller.length+e.structures.links.controller.length===0||e.controller.upgradeBlocked||e.myConstructionSites.length>0&&!e.store)return 0;if(8==e.controller.level)return 1;let t=0,o=e=>t+=e.store.energy;e.structures.container.controller.forEach(o);let r=e=>t+=e.energy;if(e.structures.links.controller.forEach(r),0===t)return 0;if(e.storage&&e.storage.active)return Math.max(1,Math.floor((e.storage.store.energy-MAX_STORAGE_ENERGY[e.controller.level])/1e5));if(e.droppedResources){let t=0,o=t=>e.sources.some(e=>e.pos.x===t.x&&e.pos.y===t.y),r=e=>{e.resourceType===RESOURCE_ENERGY&&e.pos.adjacent.some(o)&&(t+=e.amount)};if(e.droppedResources.forEach(r),t>700)return 3}return 2},e.default={fixedBody:{[CARRY]:1,[MOVE]:1,[WORK]:2},multiBody:{[MOVE]:1,[WORK]:3},minAbsEnergyAvailable:400,minEnergyAvailable:.5,maxMulti:t=>e.maxMulti(t),maxCount:t=>e.maxCount(t)},e.low={fixedBody:{[CARRY]:1,[MOVE]:1,[WORK]:2},multiBody:{[MOVE]:1,[WORK]:2},minAbsEnergyAvailable:300,minEnergyAvailable:1,maxMulti:t=>e.maxMulti(t),maxCount:t=>e.maxCount(t)},e.level8={fixedBody:{[CARRY]:1,[MOVE]:3},multiBody:[WORK],minAbsEnergyAvailable:1700,minEnergyAvailable:.5,maxMulti:CONTROLLER_MAX_UPGRADE_PER_TICK/UPGRADE_CONTROLLER_POWER,maxCount:t=>e.maxCount(t)},e.RCL={1:e.none,2:e.low,3:e.default,4:e.default,5:e.default,6:e.default,7:e.default,8:e.level8};