let a={};module.exports=a,a.name="labTech",a.run=function(a){a.data.targetId;null!=a.action&&"idle"!=a.action.name||(a.data.destiny&&a.data.destiny.task&&Task[a.data.destiny.task]&&Task[a.data.destiny.task].nextAction?Task[a.data.destiny.task].nextAction(a):this.nextAction(a)),a.action&&a.target?a.action.step(a):logError("Creep without action/activity!\nCreep: "+a.name+"\ndata: "+JSON.stringify(a.data))},a.nextAction=function(a){if(a.pos.roomName!=a.data.homeRoom&&Game.rooms[a.data.homeRoom]&&Game.rooms[a.data.homeRoom].controller)return void Creep.action.travelling.assignRoom(a,a.data.homeRoom);const e=[Creep.action.charging,Creep.action.feeding,Creep.action.fueling];let t=e;a.sum<a.carryCapacity/2?t=[Creep.action.reallocating,Creep.action.uncharging,Creep.action.picking,Creep.action.withdrawing,Creep.action.idle]:(t=e.concat([Creep.action.storing,Creep.action.idle]),(a.sum>a.carry.energy||!a.room.situation.invasion&&global.SPAWN_DEFENSE_ON_ATTACK&&a.room.conserveForDefense&&a.room.relativeEnergyAvailable>.8)&&t.unshift(Creep.action.storing),a.room.structures.urgentRepairable.length>0&&t.unshift(Creep.action.fueling));for(var n=0;n<t.length;n++){var o=t[n];if(o.isValidAction(a)&&o.isAddableAction(a)){const t=o.assignDebounce?o.assignDebounce(a,e):o.assign(a);if(t)return void("idle"!==o.name&&(a.data.lastAction=o.name,a.data.lastTarget=a.target.id))}}};