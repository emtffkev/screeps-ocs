let e=new Creep.Action("harvesting");module.exports=e,e.renewTarget=!1,e.isValidAction=function(e){return e.sum<e.carryCapacity&&e.room.sourceEnergyAvailable>0},e.isValidTarget=function(e,r){return null!==e&&null!==e.energy&&e.energy>0&&(void 0===e.targetOf||e.targetOf.length<=e.accessibleFields&&!_.some(e.targetOf,e=>("miner"===e.creepType||"remoteMiner"===e.creepType)&&e.body.work>=5&&(e.ticksToLive||CREEP_LIFE_TIME)>=(e.data&&e.data.predictedRenewal||0)))},e.isAddableTarget=function(e,r){return(!r.room.controller||(!r.room.controller.owner||r.room.controller.my)&&(!r.room.controller.reservation||r.room.controller.reservation.username==r.owner.username))&&(void 0===e.targetOf||e.targetOf.length<e.accessibleFields)},e.newTarget=function(e){const r=_.sortBy(e.room.sources,r=>e.pos.getRangeTo(r));for(const t of r)if(this.isValidTarget(t,e)&&this.isAddableTarget(t,e))return t;return null},e.work=function(e){return e.harvest(e.target)};