let e=new Creep.Action("travelling");module.exports=e,e.isValidTarget=function(e){return null!==e},e.isAddableAction=function(){return!0},e.isAddableTarget=function(){return!0},e.newTarget=function(e){return null},e.step=function(a){global.CHATTY&&a.say(this.name,global.SAY_PUBLIC);let t=_.get(a,["data","travelRange"],this.targetRange),n=a.target;if(FlagDir.isSpecialFlag(a.target))if(a.data.travelRoom){const e=Game.rooms[a.data.travelRoom];e&&e.name===a.pos.roomName?(a.leaveBorder(),n=null):(t=_.get(a,["data","travelRange"],TRAVELLING_BORDER_RANGE||22),n=new RoomPosition(25,25,a.data.travelRoom))}else logError(a.name+"Creep.action.travelling called with specialFlag target and travelRoom undefined."),n=null;if(n){const r=a.pos.getRangeTo(n);if(r<=t)return e.unregister(a);if(0===t&&a.pos.isNearTo(n)&&n.pos.lookFor(LOOK_CREEPS).length>0)return DEBUG&&logSystem(a.name,"travelling.step: destination blocked, stopping."),e.unregister(a);a.travelTo(n,{range:t,ignoreCreeps:a.data.ignoreCreeps||!0})}else e.unregister(a)},e.assignRoom=function(e,a){return a?(_.isUndefined(e.data.travelRange)&&(e.data.travelRange=TRAVELLING_BORDER_RANGE||22),e.data.travelRoom=a,Creep.action.travelling.assign(e,FlagDir.specialFlag())):void logError(e.name+"Creep.action.travelling.assignRoom called with no room.")},e.unregister=function(e){delete e.action,delete e.target,delete e.data.actionName,delete e.data.ignoreCreeps,delete e.data.targetId,delete e.data.travelRoom,delete e.data.travelRange};