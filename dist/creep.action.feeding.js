let e=new Creep.Action("feeding");module.exports=e,e.maxPerTarget=1,e.isValidAction=function(e){return e.carry.energy>0&&e.room.energyAvailable<e.room.energyCapacityAvailable},e.isValidTarget=function(e){return e&&e.energy&&e.isActive()&&e.energy<e.energyCapacity},e.isAddableTarget=function(e){return e.my&&(!e.targetOf||_.filter(e.targetOf,{actionName:"feeding"}).length<this.maxPerTarget)},e.newTarget=function(r){return r.room.energyAvailable===r.room.energyCapacityAvailable?null:r.pos.findClosestByRange(r.room.structures.feedable,{filter:t=>{return e.isValidTarget(t)&&e.isAddableTarget(t,r)}})},e.work=function(e){let r=e.transfer(e.target,RESOURCE_ENERGY);return r==OK&&e.carry.energy>e.target.energyCapacity-e.target.energy&&(e.target=null,this.assign(e)),r};